ClaudeCodeExample - プロジェクトテンプレート
================================================================================

概要
--------------------------------------------------------------------------------

このプロジェクトは、ClaudeCodeを使用したプロジェクト進行をしやすくするためのテンプレートです。標準的なディレクトリ構造とMakefileを提供し、ClaudeCodeが効率的にプロジェクトを理解し、適切なコマンドを実行できるようにします。

要件
--------------------------------------------------------------------------------

| 項目           | 内容                                |
| -------------- | ----------------------------------- |
| **OS**         | Linux環境（Debian系またはRedHat系） |
| **Debian系**   | Ubuntu, Debian等（apt-getを使用）   |
| **RedHat系**   | CentOS, RHEL, Fedora等（yumを使用） |
| **必要ツール** | Git, Make, curl, sudo権限           |

セットアップ
--------------------------------------------------------------------------------

### 基本セットアップ

| コマンド                | 説明                                            |
| ----------------------- | ----------------------------------------------- |
| `make setup`            | プロジェクトディレクトリの作成                  |
| `make setup-claudecode` | ClaudeCode、Node.js、treeコマンドのインストール |
| `make setup-all`        | 全てのセットアップを一括実行                    |

### 自動インストール機能

`make setup-claudecode`で以下が自動インストールされます：

| ツール         | 目的                 | 詳細                     |
| -------------- | -------------------- | ------------------------ |
| **Node.js**    | ClaudeCode実行環境   | NodeSourceのLTS版        |
| **ClaudeCode** | AI開発支援ツール     | Anthropic公式のCLIツール |
| **tree**       | ディレクトリ構造表示 | ClaudeCodeがよく使用     |

※ 各ツールはインストール済みかチェックしてから実行するため、重複インストールは回避されます。

使用方法
--------------------------------------------------------------------------------

| コマンド        | 説明                     |
| --------------- | ------------------------ |
| `make help`     | 利用可能なコマンドの確認 |
| `make status`   | プロジェクトの状態確認   |
| `make clean`    | 一時ファイルの削除       |
| `make diagrams` | PlantUML図の一括生成     |

ディレクトリ構造
--------------------------------------------------------------------------------

```
ClaudeCodeExample/
├── README.md             # プロジェクトの概要とセットアップ方法
├── Makefile              # ビルドやセットアップ用コマンドを定義
├── CLAUDE.md             # ClaudeCode用の設定とプロジェクト理解ファイル
├── .gitignore            # バージョン管理から除外するファイルを定義
├── bin/                  # 実行可能なスクリプトやバイナリを配置
├── src/                  # ソースコードを配置
├── docs/                 # ドキュメントを配置
│   ├── pj-rules.md       # プロジェクトのディレクトリ構造ルール
│   └── diagrams/         # PlantUML図ファイル（.puml）と生成されたSVG
├── tests/                # テストコードを配置
├── config/               # 設定ファイルを配置
├── scripts/              # 補助スクリプト（ビルド、デプロイ等）を配置
├── logs/                 # アプリケーションのログファイルを配置
└── tmp/                  # 一時的なファイルを配置（バージョン管理対象外）
```

テンプレートの特徴
--------------------------------------------------------------------------------

- **標準化されたディレクトリ構造**: pj-rules.mdに基づいた一貫性のあるプロジェクト構成
- **ClaudeCode対応**: CLAUDE.mdでClaudeCodeがプロジェクトを理解しやすくする
- **PlantUML図生成**: AIが作成した.pumlファイルをSVG変換する仕組み
- **Make統合**: 一発セットアップでClaudeCodeのインストールから環境構築まで完了
- **バージョン管理設定**: .gitignoreで適切なファイル除外設定を提供
- **Linux対応**: Debian系とRedHat系の主要Linuxディストリビューションに対応

開発フロー
--------------------------------------------------------------------------------

| ステップ            | 内容                                                     |
| ------------------- | -------------------------------------------------------- |
| **1. セットアップ** | `make setup-all`でプロジェクトとClaudeCodeのセットアップ |
| **2. 理解**         | CLAUDE.mdを参考にClaudeCodeでプロジェクトを理解          |
| **3. 開発**         | 標準的なディレクトリ構造に従って開発                     |
| **4. カスタマイズ** | 必要に応じてMakefileのターゲットを追加                   |

### ClaudeCodeへのプロジェクト作成依頼方法

#### 指示書の作成

`docs/project-request-minimal.md`を参考に、作成したいプロジェクトの指示書を作成します。

#### 指示書記載時の注意点

- **要件は具体的に**: 曖昧な表現を避け、明確な機能要件を記載
- **技術スタックは明記**: 使用する言語・フレームワーク・データベースを具体的に指定
- **非機能要件は必須**: Make統合、Docker環境、セキュリティ要件を明記
- **優先度を明確に**: 必須機能と任意機能を分けて記載
- **成果物を具体化**: 期待するファイル・ディレクトリ構造を明記

#### ClaudeCodeへの指示例

```
@docs/project-request.md を確認し、記載されている要件に基づいて
プロジェクトを作成してください。

不明な点があれば質問してください。
指定された技術スタックに従って実装してください。
```

PlantUML図生成機能
--------------------------------------------------------------------------------

このプロジェクトでは、AIが作成したPlantUML図をDocker経由でSVG形式に変換する機能を提供します。

### 図生成コマンド

| コマンド                                                                              | 説明                                  |
| ------------------------------------------------------------------------------------- | ------------------------------------- |
| `make diagrams`                                                                       | 全.pumlファイルを一括変換             |
| `docker run --rm -v "$(pwd):/work" plantuml -tsvg docs/diagrams/filename.puml` | 特定ファイルをSVG変換                 |
| `docker run --rm -v "$(pwd):/work" plantuml -tsvg "docs/diagrams/*.puml"`      | 全.pumlファイルを一括変換（直接実行） |

### 図の作成方法

- **配置場所**: `docs/diagrams/`ディレクトリに.pumlファイルを作成
- **命名規則**: `{目的}-{種類}.puml` （例: `system-overview.puml`）
- **テンプレート**: `template-*.puml`ファイルを参考に作成可能
- **変換実行**: 上記dockerコマンドで.svgファイルが同じ場所に生成される
- **テンプレート除外**: `template-`で始まるファイルは一括変換から自動除外

### AIによる図作成の指示例

```
docs/diagrams/にシステム構成図を作成してください。
PlantUML形式で、フロントエンド、バックエンド、データベースの
関係を表現してください。

作成後、以下のコマンドでSVGに変換してください：
docker run --rm -v "$(pwd):/work" plantuml -tsvg docs/diagrams/system-overview.puml
```

### 図の参照方法

Markdownファイルから以下の形式で参照：

```markdown
![システム構成図](docs/diagrams/system-overview.svg)
```
